(function(){"use strict";const s=e=>{switch(e){case"hangul":return l;case"alphanumeric":return h;case"kana":return m;case"cyrillic":return u}},l={letterName:"hangul",letterNameKorean:"한글",defaultName:"설",filterRegex:/[^ㄱ-ㅎㅏ-ㅣ가-힣]/g,filterRegex2:/[^가-힣]/g,codeRange:[[44032,55203]],letterCount:11172,letterCountText:"11,172자",warnLength:2,generateRandomCharacter:()=>{const e=Math.ceil(44032),a=Math.floor(55203),t=Math.floor(Math.random()*(a-e+1))+e;return String.fromCharCode(t)}},h={letterName:"alphanumeric",letterNameKorean:"알파벳과 숫자",defaultName:"Eira",filterRegex:/[^0-9A-Za-z]/g,codeRange:[[48,57],[65,90],[97,122]],letterCount:62,letterCountText:"10자(숫자) + 26자(대문자) + 26자(소문자)",warnLength:5,generateRandomCharacter:()=>{const e=Math.ceil(48),a=Math.floor(109);let t=Math.floor(Math.random()*(a-e+1))+e;return t>=58&&t<=83?t+=7:t>=84&&t<=108&&(t+=13),String.fromCharCode(t)}},m={letterName:"kana",letterNameKorean:"히라가나와 가타카나",defaultName:"ゆき",filterRegex:/[^ぁ-ゔァ-ヺ]/g,codeRange:[[12353,12436],[12449,12538]],letterCount:174,letterCountText:"84자(히라가나) + 90자(가타카나)",warnLength:4,generateRandomCharacter:()=>{const e=Math.ceil(12353),a=Math.floor(12526);let t=Math.floor(Math.random()*(a-e+1))+e;return t>=12437&&t<=12526&&(t+=12),String.fromCharCode(t)}},u={letterName:"cyrillic",letterNameKorean:"키릴 문자",defaultName:"Снежа",filterRegex:/[^ЁА-яё]/g,codeRange:[[1025,1025],[1040,1103],[1105,1105]],letterCount:66,letterCountText:"33자(대문자) + 33자(소문자)",warnLength:5,generateRandomCharacter:()=>{const e=Math.ceil(1039),a=Math.floor(1104);let t=Math.floor(Math.random()*(a-e+1))+e;return t<1040?t=1025:t>1103&&(t=1105),String.fromCharCode(t)}};class d{buffer;capacity;cursor=0;totalLength=0;constructor(a){this.capacity=a,this.buffer=new Uint32Array(a)}push(a){this.buffer[this.cursor]=a.codePointAt(0),this.cursor=(this.cursor+1)%this.capacity,this.totalLength++}at(a){const t=(this.cursor+a)%this.capacity;return this.buffer[t]}generateString(){const a=Math.min(this.totalLength,this.capacity),t=new Array(a),r=this.totalLength<this.capacity?0:this.cursor;for(let i=0;i<a;i++){const p=(r+i)%this.capacity;t[i]=String.fromCodePoint(this.buffer[p])}return t.join("")}}const o={updatePeriod:1e3/60,maxLength:30};let n;const g=e=>{let a=new Uint32Array(e.length);for(let t=0;t<e.length;t++)a[t]=e[t].codePointAt(0);n={matchName:a,monkeySaid:new d(o.maxLength),saidCount:0,isFinish:!1}};onmessage=e=>{let a=s(e.data.writingSystem),t=e.data.matchName;f(a,t)};const f=(e,a)=>{g(a);let t=performance.now();for(;!y();){n.monkeySaid.push(e.generateRandomCharacter()),n.saidCount++;const r=performance.now();r-t>=o.updatePeriod&&(c(),t=r)}n.isFinish=!0,c()},c=()=>{postMessage({said:C(),count:n.saidCount,isFinish:n.isFinish})},C=()=>{let e=n.monkeySaid.generateString();if(n.isFinish){const a=e.slice(0,-n.matchName.length),t=e.slice(-n.matchName.length);e=`${a}<span style='color: red;'><b>${t}</b></span>`}return e},y=()=>{const e=n.matchName.length;if(n.monkeySaid.totalLength<e)return!1;const a=o.maxLength-n.matchName.length;for(let t=0;t<e;t++)if(n.monkeySaid.at(a+t)!==n.matchName[t])return!1;return!0}})();
